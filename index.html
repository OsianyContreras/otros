<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Osiany 56 - Neural Era Celebration</title>

    <!-- Metadatos para compartir -->
    <meta property="og:title" content="Osiany 56 - Neural Era Celebration">
    <meta property="og:description" content="Protocolo de acceso iniciado. Registro de tripulaciÃ³n activo.">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://osianycontreras.github.io/otros/">

    <!-- Fuentes Futuristas -->
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=Share+Tech+Mono&display=swap"
        rel="stylesheet">

    <!-- Scripts Base -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <style>
        :root {
            --neon-primary: #00f2ff;
            --neon-secondary: #bc13fe;
            --neon-accent: #00ff88;
            --bg-deep: #02040a;
            --text-main: #b0fbff;
        }

        .theme-overload {
            --neon-primary: #ff0000;
            --neon-secondary: #ffcc00;
            /* Gold/Orange for contrast */
            --neon-accent: #ff4400;
            --bg-deep: #050000;
            --text-main: #ffcccc;
        }

        .theme-elite {
            --neon-primary: #ffcc00;
            --neon-secondary: #ffffff;
            /* White for maximum contrast */
            --neon-accent: #ffffff;
            --bg-deep: #0a0800;
            --text-main: #fff5cc;
        }

        body {
            margin: 0;
            background: var(--bg-deep);
            overflow-x: hidden;
            font-family: 'Orbitron', sans-serif;
            color: var(--text-main);
            transition: all 0.5s ease;
        }

        /* Neural Background Canvas */
        #neural-canvas {
            position: fixed;
            inset: 0;
            z-index: -1;
            background: var(--bg-deep);
        }

        .font-mono-robot {
            font-family: 'Share Tech Mono', monospace;
        }

        /* Glassmorphism 2.0 */
        .glass-premium {
            background: rgba(5, 10, 20, 0.7);
            backdrop-filter: blur(25px) saturate(180%);
            -webkit-backdrop-filter: blur(25px) saturate(180%);
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow:
                0 25px 50px -12px rgba(0, 0, 0, 0.5),
                inset 0 0 20px rgba(0, 242, 255, 0.05);
        }

        /* Glitch Effect */
        .glitch {
            position: relative;
            display: inline-block;
        }

        .glitch::before,
        .glitch::after {
            content: attr(data-text);
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            opacity: 0.8;
        }

        .glitch::before {
            color: var(--neon-primary);
            z-index: -1;
            animation: glitch-anim 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94) both infinite;
        }

        .glitch::after {
            color: var(--neon-secondary);
            z-index: -2;
            animation: glitch-anim 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94) reverse both infinite;
        }

        @keyframes glitch-anim {
            0% {
                transform: translate(0);
            }

            20% {
                transform: translate(-2px, 2px);
            }

            40% {
                transform: translate(-2px, -2px);
            }

            60% {
                transform: translate(2px, 2px);
            }

            80% {
                transform: translate(2px, -2px);
            }

            100% {
                transform: translate(0);
            }
        }

        @keyframes ship-fly {
            0% {
                transform: translate(-100vw, 50vh) scale(0.4) rotate(15deg);
                opacity: 0;
            }

            5% {
                opacity: 1;
            }

            15% {
                transform: translate(-20vw, 20vh) scale(0.6) rotate(10deg);
            }

            85% {
                transform: translate(80vw, -40vh) scale(1.2) rotate(5deg);
                opacity: 1;
            }

            100% {
                transform: translate(200vw, -100vh) scale(2) rotate(0deg);
                opacity: 0;
            }
        }

        /* Super Thick Warp Speed Trail */
        .warp-trail {
            position: absolute;
            top: 50%;
            right: 85%;
            width: 500px;
            height: 25px;
            /* Thicker for more impact */
            background: linear-gradient(to left,
                    var(--neon-primary),
                    var(--neon-secondary),
                    var(--neon-accent),
                    transparent);
            filter: blur(8px);
            /* Higher blur for background glow effect */
            opacity: 0;
            animation: warp-pulse 0.4s infinite;
            border-radius: 50px;
            z-index: 2;
            /* Behind banner (15) and ship (10) */
            box-shadow:
                0 0 30px var(--neon-primary),
                0 0 60px var(--neon-secondary);
        }

        @keyframes warp-pulse {

            0%,
            100% {
                opacity: 0.8;
                transform: scaleX(1) scaleY(1);
                filter: blur(4px);
            }

            50% {
                opacity: 1;
                transform: scaleX(1.5) scaleY(1.2);
                filter: blur(2px);
            }
        }

        .indigenous-ship-wrapper {
            position: fixed;
            z-index: 9999;
            pointer-events: none;
            left: 0;
            top: 0;
            width: 100vw;
            height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            animation: ship-fly 18s ease-in-out forwards;
        }

        .ship-model {
            width: 80vw;
            max-width: 400px;
            height: auto;
            position: relative;
            z-index: 10;
            filter: drop-shadow(0 0 10px rgba(0, 242, 255, 0.8));
            -webkit-filter: drop-shadow(0 0 10px rgba(0, 242, 255, 0.8));
            will-change: transform, opacity;
        }

        @media (min-width: 768px) {
            .ship-model {
                width: 400px;
                filter: drop-shadow(0 0 20px rgba(0, 242, 255, 0.8)) drop-shadow(0 0 40px rgba(0, 242, 255, 0.4));
            }
        }

        .ship-banner {
            position: absolute;
            z-index: 15;
            /* Above trail and ship if needed, or between */
            top: 65%;
            /* Even closer vertically */
            left: 5%;
            /* Tucked closer to the ship's tail center */
            color: #ffffff;
            /* White text for maximum contrast */
            padding: 8px 25px;
            /* More padding for a solid box look */
            background: rgba(0, 0, 0, 0.9);
            /* Darker background */
            border: 2px solid #ff0000;
            /* Sharp red border */
            box-shadow: 0 0 25px rgba(255, 0, 0, 0.7);
            /* More intense glow */
            font-family: 'Orbitron', sans-serif;
            font-weight: 900;
            font-size: 18px;
            /* Larger font */
            letter-spacing: 1px;
            text-transform: uppercase;
            white-space: nowrap;
            text-shadow: 0 0 8px #ff0000;
            /* Subtle red glow on white letters */
            animation: banner-wave 2s ease-in-out infinite, electrical-flicker 0.15s infinite;
            transform: rotate(-15deg);
            border-radius: 4px;
            /* Slightly rounded for a tech look */
        }

        @media (min-width: 768px) {
            .ship-banner {
                padding: 12px 40px;
                font-size: 28px;
                left: 0%;
                /* Centered slightly behind the ship on desktop */
                top: 70%;
            }
        }

        /* Connecting Tether - Ultra Short */
        .ship-banner::before {
            content: '';
            position: absolute;
            top: -10px;
            right: 20%;
            width: 30px;
            /* Very short tether */
            height: 2px;
            background: rgba(255, 31, 31, 0.8);
            box-shadow: 0 0 8px #ff0000;
            transform: rotate(-60deg);
            transform-origin: right top;
        }

        @keyframes banner-wave {

            0%,
            100% {
                transform: skewX(-15deg) scaleX(0.95);
            }

            50% {
                transform: skewX(15deg) scaleX(1.05);
            }
        }

        @keyframes electrical-flicker {

            0%,
            100% {
                border-color: #ff0000;
                box-shadow: 0 0 15px rgba(255, 0, 0, 0.5);
            }

            50% {
                border-color: #ff8888;
                box-shadow: 0 0 30px rgba(255, 100, 100, 0.9), 0 0 10px #fff;
            }

            70% {
                border-color: #ff0000;
                box-shadow: 0 0 5px rgba(255, 0, 0, 0.2);
            }
        }

        @keyframes scan-y {
            0% {
                top: -10%;
                opacity: 0;
            }

            50% {
                opacity: 0.5;
            }

            100% {
                top: 110%;
                opacity: 0;
            }
        }

        .card-container {
            background: rgba(5, 8, 16, 0.9);
            backdrop-filter: blur(40px);
            border: 1px solid rgba(0, 242, 255, 0.2);
            box-shadow: 0 0 50px rgba(0, 0, 0, 0.8), 0 0 20px rgba(0, 242, 255, 0.05);
            position: relative;
            overflow: hidden;
            transform-style: preserve-3d;
            perspective: 1000px;
            transition: transform 0.1s ease-out;
        }

        .card-container::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 2px;
            background: linear-gradient(90deg, transparent, var(--neon-primary), transparent);
            animation: scan-y 4s linear infinite;
        }

        .btn-neural {
            background: linear-gradient(45deg, var(--neon-primary), #fff);
            color: #000;
            font-weight: 900;
            text-transform: uppercase;
            transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            box-shadow: 0 0 15px var(--neon-primary);
        }

        .btn-neural:hover {
            transform: scale(1.02) translateY(-2px);
            box-shadow: 0 0 30px var(--neon-primary);
        }

        .btn-secondary {
            border: 1px solid var(--neon-secondary);
            color: var(--neon-secondary);
            background: rgba(255, 255, 255, 0.05);
            /* Fix rgba variable issue */
            transition: all 0.3s ease;
        }

        .btn-secondary:hover {
            background: var(--neon-secondary);
            color: #fff;
            box-shadow: 0 0 20px var(--neon-secondary);
        }

        .text-glow-cyan {
            text-shadow: 0 0 10px var(--neon-primary);
        }

        .text-glow-purple {
            text-shadow: 0 0 10px var(--neon-secondary);
        }

        @keyframes title-float {

            0%,
            100% {
                transform: translateY(0);
            }

            50% {
                transform: translateY(-10px);
            }
        }

        .title-premium {
            font-size: clamp(3.2rem, 15vw, 6.5rem) !important;
            white-space: nowrap;
            color: #fff;
            -webkit-text-stroke: 1px rgba(0, 0, 0, 0.5);
            text-shadow:
                0 0 10px var(--neon-primary),
                0 0 20px var(--neon-primary),
                0 0 40px var(--neon-primary),
                0 0 80px rgba(0, 242, 255, 0.3);
            animation: title-float 4s ease-in-out infinite;
            background: linear-gradient(to bottom, #fff 40%, var(--neon-primary));
            background-clip: text;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        /* Reveal Animations */
        .reveal-up {
            opacity: 0;
            transform: translateY(30px);
            transition: all 0.8s cubic-bezier(0.2, 0.8, 0.2, 1);
        }

        .reveal-up.active {
            opacity: 1;
            transform: translateY(0);
        }

        /* Particle Background */
        #particle-canvas {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -2;
            pointer-events: none;
        }

        .countdown-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            background: rgba(0, 242, 255, 0.05);
            border: 1px solid rgba(0, 242, 255, 0.2);
            padding: 8px;
            min-width: 70px;
            border-radius: 4px;
        }

        .share-row {
            display: flex;
            gap: 10px;
            justify-content: center;
            margin-top: 20px;
        }

        .btn-mini {
            font-size: 10px;
            padding: 6px 12px;
            border-radius: 4px;
            font-weight: 800;
            text-transform: uppercase;
            letter-spacing: 1px;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        /* Hyperspace Jump Effect */
        .hyperspace-overlay {
            position: fixed;
            inset: 0;
            z-index: 1000;
            background: radial-gradient(circle at center, transparent 30%, var(--neon-primary) 100%);
            opacity: 0;
            pointer-events: none;
            mix-blend-mode: screen;
        }

        .hyperspace-active {
            animation: hyperspace-jump 1.5s cubic-bezier(0.8, 0, 0.2, 1) forwards;
        }

        @keyframes hyperspace-jump {
            0% {
                opacity: 0;
                transform: scale(1);
                filter: blur(0);
            }

            50% {
                opacity: 1;
                transform: scale(2);
                filter: blur(30px);
            }

            100% {
                opacity: 0;
                transform: scale(4);
                filter: blur(100px);
            }
        }

        /* Biometric Scanner CSS */
        .scanner-lens {
            position: fixed;
            width: 250px;
            height: 250px;
            border: 2px solid var(--neon-accent);
            border-radius: 50%;
            pointer-events: none;
            z-index: 100;
            box-shadow: 0 0 50px var(--neon-accent), inset 0 0 30px var(--neon-accent);
            mix-blend-mode: screen;
            opacity: 0.4;
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
            transition: transform 0.1s ease-out;
        }

        .scanner-grid {
            position: absolute;
            width: 100%;
            height: 100%;
            background-image:
                linear-gradient(rgba(0, 255, 136, 0.1) 1px, transparent 1px),
                linear-gradient(90deg, rgba(0, 255, 136, 0.1) 1px, transparent 1px);
            background-size: 20px 20px;
            animation: scanner-rotate 10s linear infinite;
        }

        @keyframes scanner-rotate {
            from {
                transform: rotate(0deg);
            }

            to {
                transform: rotate(360deg);
            }
        }

        @keyframes animate-spin-slow {
            from {
                transform: rotate(0deg);
            }

            to {
                transform: rotate(360deg);
            }
        }

        .scanner-line {
            position: absolute;
            width: 100%;
            height: 2px;
            background: var(--neon-accent);
            box-shadow: 0 0 10px var(--neon-accent);
            animation: scan-vertical 2s ease-in-out infinite;
        }

        @keyframes scan-vertical {

            0%,
            100% {
                top: 0;
            }

            50% {
                top: 100%;
            }
        }

        /* Interface Glitch Overlay */
        .glitch-transition {
            position: fixed;
            inset: 0;
            z-index: 2000;
            background: #000;
            opacity: 0;
            pointer-events: none;
        }

        .glitch-transition.active {
            animation: global-glitch 0.4s steps(2) forwards;
        }

        @keyframes global-glitch {
            0% {
                opacity: 0.3;
                transform: translate(5px, 0);
            }

            20% {
                opacity: 0.5;
                transform: translate(-5px, 5px);
                background: rgba(255, 0, 0, 0.2);
            }

            40% {
                opacity: 0.2;
                transform: translate(10px, -5px);
                background: rgba(0, 255, 136, 0.2);
            }

            60% {
                opacity: 0.6;
                transform: translate(-10px, 0);
                clip-path: inset(10% 0 15% 0);
            }

            80% {
                opacity: 0.4;
                transform: translate(5px, 5px);
            }

            100% {
                opacity: 0;
                transform: translate(0);
            }
        }

        /* Holographic Capsule FX */
        .holo-capsule {
            position: relative;
            width: 80px;
            height: 80px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .holo-base {
            position: absolute;
            bottom: 0;
            width: 40px;
            height: 10px;
            background: #bc13fe;
            box-shadow: 0 0 20px #bc13fe;
            border-radius: 5px;
            z-index: 1;
        }

        .holo-beam {
            position: absolute;
            bottom: 10px;
            width: 60px;
            height: 0;
            background: linear-gradient(to top, rgba(188, 19, 254, 0.4), transparent);
            clip-path: polygon(20% 0, 80% 0, 100% 100%, 0 100%);
            transition: height 0.5s ease-out, opacity 0.5s;
            opacity: 0;
            pointer-events: none;
        }

        .holo-capsule:hover .holo-beam {
            height: 100px;
            opacity: 1;
        }

        .holo-vapor {
            position: absolute;
            width: 100%;
            height: 100%;
            background: radial-gradient(circle, #bc13fe 0%, transparent 70%);
            filter: blur(10px);
            opacity: 0;
            animation: vapor-float 4s infinite;
        }

        @keyframes vapor-float {

            0%,
            100% {
                transform: translateY(0) scale(1);
                opacity: 0.1;
            }

            50% {
                transform: translateY(-20px) scale(1.2);
                opacity: 0.3;
            }
        }

        /* Ultra-Premium: 3D Host Hologram - MOON EDITION */
        .holo-3d-container {
            width: 400px;
            height: 400px;
            perspective: 1000px;
            transform-style: preserve-3d;
            position: relative;
            margin-bottom: 2rem;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .moon-sphere {
            position: absolute;
            width: 280px;
            height: 280px;
            background: url('luna.png') no-repeat center center;
            background-size: cover;
            border-radius: 50%;
            box-shadow:
                inset -50px -50px 100px rgba(0, 0, 0, 0.9),
                inset 30px 30px 60px rgba(255, 255, 255, 0.2),
                0 0 80px rgba(255, 255, 255, 0.1);
            /* Remove z-index to allow 3D depth buffer to handle sorting */
            transform-style: preserve-3d;
            transform: translateZ(0);
            animation: moon-float 8s ease-in-out infinite;
        }

        .moon-craters {
            display: none;
            /* Hide generated craters as we have a real texture now */
        }

        .orbit-system {
            position: absolute;
            width: 100%;
            height: 100%;
            transform-style: preserve-3d;
            /* Remove z-index to avoid flattening children into a 2D layer */
        }

        .orbit-rotate-container {
            position: absolute;
            inset: 0;
            transform-style: preserve-3d;
            animation: orbit-rotate-y 15s linear infinite;
            /* Faster 15s orbit */
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .orbital-ring {
            position: absolute;
            inset: 0;
            border: 4px solid rgba(0, 242, 255, 0.2);
            border-radius: 50%;
            transform: translateZ(0);
        }

        /* Sparking Effect (Anillo de Poder) - FULMINATING EDITION */
        .orbital-ring::after {
            content: '';
            position: absolute;
            inset: -12px;
            border-radius: 50%;
            padding: 12px;
            background: conic-gradient(from 0deg,
                    transparent 0%,
                    #00f2ff 10%,
                    #fff 15%,
                    #00f2ff 25%,
                    transparent 35%,
                    transparent 60%,
                    #fff 70%,
                    transparent 80%);
            mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
            -webkit-mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
            mask-composite: exclude;
            -webkit-mask-composite: xor;
            animation: spark-rotate 5s linear infinite;
            /* Slower sparks for elegance */
            filter: drop-shadow(0 0 35px #00f2ff) brightness(2);
        }

        @keyframes spark-rotate {
            from {
                transform: rotate(0deg);
            }

            to {
                transform: rotate(360deg);
            }
        }

        .holo-3d-text-wrapper {
            position: absolute;
            transform-style: preserve-3d;
            width: 100%;
            height: 100%;
            pointer-events: none;
        }

        .holo-3d-text {
            font-family: 'Orbitron', sans-serif;
            font-size: 55px;
            font-weight: 900;
            color: #fff;
            text-transform: uppercase;
            position: absolute;
            left: 50%;
            top: 50%;
            text-shadow:
                0 0 10px #00f2ff,
                0 0 30px #00f2ff,
                0 0 50px #00f2ff;
            white-space: nowrap;
            backface-visibility: visible;
            transform-style: preserve-3d;
            /* Extreme depth boost + centered */
            transform: translate3d(-50%, -50%, 165px);
            opacity: 1 !important;
            visibility: visible !important;
            display: block !important;
        }

        .text-osiany {
            color: #bc13fe;
            /* Solid Purple Fallback */
            background: linear-gradient(to right, #bc13fe, #ff0000, #ff007f);
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
            -webkit-text-stroke: 1.5px #000;
            font-weight: 900;
            transform: translate3d(-50%, -50%, 165px);
        }

        .text-56 {
            color: #ff007f;
            /* Solid Magenta Fallback */
            background: linear-gradient(to right, #ff007f, #ff0000, #bc13fe);
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
            -webkit-text-stroke: 1.5px #000;
            font-weight: 900;
            transform: translate3d(-50%, -50%, -165px) rotateY(180deg);
        }

        @keyframes orbit-rotate-y {
            from {
                transform: rotateX(15deg) rotateY(0deg);
            }

            to {
                transform: rotateX(15deg) rotateY(360deg);
            }
        }

        @keyframes moon-float {

            0%,
            100% {
                transform: translateY(0);
            }

            50% {
                transform: translateY(-15px);
            }
        }

        @keyframes holo-rotate {
            from {
                transform: rotateY(0);
            }

            to {
                transform: rotateY(360deg);
            }
        }

        /* Holographic Access ID Card */
        .id-card-container {
            position: absolute;
            width: 350px;
            height: 200px;
            background: rgba(0, 242, 255, 0.05);
            border: 1px solid rgba(0, 242, 255, 0.3);
            border-radius: 15px;
            backdrop-filter: blur(10px);
            display: flex;
            flex-direction: column;
            padding: 1.5rem;
            box-shadow:
                0 0 50px rgba(0, 242, 255, 0.1),
                inset 0 0 20px rgba(0, 242, 255, 0.1);
            overflow: hidden;
            animation: id-glow 4s infinite alternate;
            z-index: 600;
        }

        .id-card-container::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: linear-gradient(45deg, transparent, rgba(255, 255, 255, 0.1), transparent);
            transform: rotate(45deg);
            animation: id-shine 3s infinite;
        }

        @keyframes id-shine {
            0% {
                transform: translateX(-100%) rotate(45deg);
            }

            100% {
                transform: translateX(100%) rotate(45deg);
            }
        }

        @keyframes id-glow {
            from {
                box-shadow: 0 0 30px rgba(0, 242, 255, 0.2);
            }

            to {
                box-shadow: 0 0 60px rgba(0, 242, 255, 0.4);
            }
        }

        .id-scan-line {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 2px;
            background: #00f2ff;
            box-shadow: 0 0 10px #00f2ff;
            animation: scan-move 2s linear infinite;
        }

        @keyframes scan-move {
            0% {
                top: 0;
            }

            100% {
                top: 100%;
            }
        }

        .id-photo {
            width: 80px;
            height: 80px;
            background: rgba(0, 242, 255, 0.1);
            border: 1px solid rgba(0, 242, 255, 0.5);
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 1.5rem;
            position: relative;
        }

        .id-photo::after {
            content: 'ðŸ‘¤';
            font-size: 40px;
            opacity: 0.5;
        }

        .id-data-row {
            font-family: 'Orbitron', sans-serif;
            font-size: 10px;
            color: rgba(0, 242, 255, 0.6);
            margin-bottom: 0.2rem;
            text-transform: uppercase;
        }

        .id-data-val {
            font-size: 14px;
            color: #fff;
            font-weight: 800;
            letter-spacing: 2px;
        }

        /* Neural Energy Visualizer */
        @keyframes neural-pulse {

            0%,
            100% {
                filter: brightness(1) drop-shadow(0 0 5px var(--neon-primary));
            }

            50% {
                filter: brightness(1.5) drop-shadow(0 0 20px var(--neon-primary));
            }
        }

        .energy-reactive {
            animation: neural-pulse 2s infinite ease-in-out;
        }

        .energy-reactive-fast {
            animation: neural-pulse 0.5s infinite ease-in-out;
        }

        /* Tactical HUD Map */
        .hud-map-container {
            position: relative;
            width: 100%;
            height: 120px;
            background: #050a10;
            border: 1px solid rgba(188, 19, 254, 0.3);
            border-radius: 4px;
            overflow: hidden;
            background-image:
                linear-gradient(rgba(188, 19, 254, 0.1) 1px, transparent 1px),
                linear-gradient(90deg, rgba(188, 19, 254, 0.1) 1px, transparent 1px);
            background-size: 20px 20px;
        }

        .hud-radar-sweep {
            position: absolute;
            top: 50%;
            left: 50%;
            width: 300px;
            height: 300px;
            background: conic-gradient(from 0deg, rgba(188, 19, 254, 0.4), transparent 90deg);
            transform-origin: center;
            transform: translate(-50%, -50%);
            animation: radar-rotate 4s linear infinite;
            border-radius: 50%;
        }

        @keyframes radar-rotate {
            from {
                transform: translate(-50%, -50%) rotate(0deg);
            }

            to {
                transform: translate(-50%, -50%) rotate(360deg);
            }
        }

        .hud-target {
            position: absolute;
            top: 40%;
            left: 60%;
            width: 10px;
            height: 10px;
            background: #ff0000;
            border-radius: 50%;
            box-shadow: 0 0 15px #ff0000;
            animation: target-pulse 1s infinite alternate;
        }

        @keyframes target-pulse {
            from {
                transform: scale(0.8);
                opacity: 0.6;
            }

            to {
                transform: scale(1.4);
                opacity: 1;
            }
        }

        .hud-coords {
            position: absolute;
            bottom: 5px;
            right: 10px;
            font-family: 'Courier New', monospace;
            font-size: 8px;
            color: #bc13fe;
            text-align: right;
        }

        .hud-status {
            position: absolute;
            top: 5px;
            left: 10px;
            font-size: 8px;
            font-weight: black;
            color: #00ff88;
            letter-spacing: 1px;
        }

        /* Stardust Click FX */
        .stardust-fx {
            position: fixed;
            width: 4px;
            height: 4px;
            background: #fff;
            border-radius: 50%;
            pointer-events: none;
            z-index: 50;
            box-shadow: 0 0 10px #fff;
        }

        /* Data Overload Visuals */
        .overload-active {
            filter: contrast(120%) brightness(120%);
            --neon-primary: #fff;
            --neon-secondary: var(--neon-primary);
        }

        /* Radial Menu CSS */
        .radial-menu-container {
            position: fixed;
            pointer-events: none;
            z-index: 2000;
            width: 200px;
            height: 200px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: opacity 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .radial-item {
            position: absolute;
            width: 45px;
            height: 45px;
            background: rgba(0, 0, 0, 0.8);
            border: 1px solid var(--neon-primary);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--neon-primary);
            pointer-events: auto;
            cursor: pointer;
            box-shadow: 0 0 15px var(--neon-primary);
            transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            opacity: 0;
            transform: scale(0);
        }

        .radial-menu-active .radial-item {
            opacity: 1;
            transform: scale(1);
        }

        /* Positions for items */
        .radial-item:nth-child(1) {
            transform: translate(0, -70px);
        }

        .radial-item:nth-child(2) {
            transform: translate(60px, -35px);
        }

        .radial-item:nth-child(3) {
            transform: translate(60px, 35px);
        }

        .radial-item:nth-child(4) {
            transform: translate(0, 70px);
        }

        .radial-item:nth-child(5) {
            transform: translate(-60px, 35px);
        }

        .radial-item:nth-child(6) {
            transform: translate(-60px, -35px);
        }

        .radial-item:hover {
            background: var(--neon-primary);
            color: black;
            box-shadow: 0 0 30px var(--neon-primary);
        }

        .radial-center {
            width: 40px;
            height: 40px;
            background: rgba(0, 242, 255, 0.2);
            border: 2px solid #00f2ff;
            border-radius: 50%;
            animation: pulse-slow 2s infinite;
        }

        @keyframes pulse-slow {

            0%,
            100% {
                transform: scale(1);
                opacity: 0.5;
            }

            50% {
                transform: scale(1.2);
                opacity: 1;
            }
        }
    </style>
</head>

<body>
    <canvas id="neural-canvas"></canvas>
    <div id="hyperspace-fx" class="hyperspace-overlay"></div>
    <div id="glitch-fx" class="glitch-transition"></div>
    <div id="root"></div>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
        import { getFirestore, collection, addDoc, onSnapshot, doc, getDoc, serverTimestamp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";
        import { getAuth, signInAnonymously, onAuthStateChanged, signInWithCustomToken } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";

        window.FirebaseCore = { initializeApp, getFirestore, collection, addDoc, onSnapshot, getAuth, signInAnonymously, onAuthStateChanged, signInWithCustomToken, serverTimestamp };
    </script>

    <script type="text/babel">
        const { useState, useEffect, useCallback, useRef } = React;

        const BotIcon = ({ className }) => (<svg className={className} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><rect width="18" height="10" x="3" y="11" rx="2" /><circle cx="12" cy="5" r="2" /><path d="M12 7v4" /><line x1="8" y1="16" x2="8" y2="16" /><line x1="16" y1="16" x2="16" y2="16" /></svg>);
        const CalendarIcon = ({ className }) => (<svg className={className} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><rect width="18" height="18" x="3" y="4" rx="2" ry="2" /><line x1="16" y1="2" x2="16" y2="6" /><line x1="8" y1="2" x2="8" y2="6" /><line x1="3" y1="10" x2="21" y2="10" /></svg>);
        const MapPinIcon = ({ className }) => (<svg className={className} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><path d="M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z" /><circle cx="12" cy="10" r="3" /></svg>);
        const RocketIcon = ({ className }) => (<svg className={className} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><path d="M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z" /><path d="m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z" /><path d="M9 12H4s.55-3.03 2-5c1.62-2.2 5-3 5-3" /><path d="M12 15v5s3.03-.55 5-2c2.2-1.62 3-5 3-5" /></svg>);
        const UsersIcon = ({ className }) => (<svg className={className} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2" /><circle cx="9" cy="7" r="4" /><path d="M22 21v-2a4 4 0 0 0-3-3.87" /><path d="M16 3.13a4 4 0 0 1 0 7.75" /></svg>);
        const HomeIcon = ({ className }) => (<svg className={className} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><path d="m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z" /><polyline points="9 22 9 12 15 12 15 22" /></svg>);
        const ShareIcon = ({ className }) => (<svg className={className} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><path d="M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8" /><polyline points="16 6 12 2 8 6" /><line x1="12" y1="2" x2="12" y2="15" /></svg>);

        const GiftIcon = ({ className }) => (<svg className={className} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><path d="M20 12V8H4v4" /><path d="M2 4h20v4H2z" /><path d="M12 22V8" /><path d="M12 8H7.5a2.5 2.5 0 0 1 0-5C11 3 12 8 12 8z" /><path d="M12 8h4.5a2.5 2.5 0 0 0 0-5C13 3 12 8 12 8z" /><path d="M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8" /></svg>);
        const Volume2Icon = ({ className }) => (<svg className={className} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5" /><path d="M19.07 4.93a10 10 0 0 1 0 14.14M15.54 8.46a5 5 0 0 1 0 7.07" /></svg>);
        const MusicIcon = Volume2Icon;
        const ZapIcon = ({ className }) => (<svg className={className} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2" /></svg>);
        const FlameIcon = ({ className }) => (<svg className={className} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><path d="M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.5 3.5 6.5 1.5 2 2 4.5 2 7a7 7 0 1 1-14 0c0-3 2.5-5 5-5z" /></svg>);

        const CountdownTimer = ({ targetDate }) => {
            const [timeLeft, setTimeLeft] = useState({ days: 0, hours: 0, minutes: 0, seconds: 0 });

            useEffect(() => {
                const interval = setInterval(() => {
                    const now = new Date().getTime();
                    const distance = new Date(targetDate).getTime() - now;

                    if (distance < 0) {
                        clearInterval(interval);
                        return;
                    }

                    setTimeLeft({
                        days: Math.floor(distance / (1000 * 60 * 60 * 24)),
                        hours: Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60)),
                        minutes: Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60)),
                        seconds: Math.floor((distance % (1000 * 60)) / 1000)
                    });
                }, 1000);
                return () => clearInterval(interval);
            }, [targetDate]);

            return (
                <div className="flex gap-2 justify-center mt-6">
                    {Object.entries(timeLeft).map(([unit, value]) => (
                        <div key={unit} className="countdown-item shadow-lg">
                            <span className="text-2xl font-black text-[#00f2ff]">{value.toString().padStart(2, '0')}</span>
                            <span className="text-[8px] font-bold text-white/50 uppercase tracking-widest">{unit}</span>
                        </div>
                    ))}
                </div>
            );
        };

        const useIntersectionObserver = (ref, options) => {
            const [isIntersecting, setIntersecting] = useState(false);

            useEffect(() => {
                const observer = new IntersectionObserver(([entry]) => {
                    if (entry.isIntersecting) {
                        setIntersecting(true);
                        if (options?.triggerOnce) observer.unobserve(entry.target);
                    }
                }, options);

                if (ref.current) observer.observe(ref.current);
                return () => observer.disconnect();
            }, [ref, options]);

            return isIntersecting;
        };

        const RevealSection = ({ children, className = "" }) => {
            const ref = useRef(null);
            const isVisible = useIntersectionObserver(ref, { triggerOnce: true, threshold: 0.1 });
            return (
                <div ref={ref} className={`${className} reveal-up ${isVisible ? 'active' : ''}`}>
                    {children}
                </div>
            );
        };

        const BiometricScanner = () => {
            const [pos, setPos] = useState({ x: -300, y: -300 });

            useEffect(() => {
                const handleMove = (e) => {
                    const x = e.clientX || (e.touches ? e.touches[0].clientX : -300);
                    const y = e.clientY || (e.touches ? e.touches[0].clientY : -300);
                    setPos({ x: x - 125, y: y - 125 });
                };
                window.addEventListener('mousemove', handleMove);
                window.addEventListener('touchmove', handleMove);
                return () => {
                    window.removeEventListener('mousemove', handleMove);
                    window.removeEventListener('touchmove', handleMove);
                };
            }, []);

            return (
                <div
                    className="scanner-lens"
                    style={{
                        transform: `translate(${pos.x}px, ${pos.y}px)`,
                        display: pos.x < -200 ? 'none' : 'flex'
                    }}
                >
                    <div className="scanner-grid"></div>
                    <div className="scanner-line"></div>
                    <div className="text-[8px] font-black text-[#00ff88] absolute bottom-4 uppercase tracking-widest">Scanning Bio-Data...</div>
                </div>
            );
        };

        const TerminalText = ({ text, delay = 30, onComplete, sync = true }) => {
            const [displayedText, setDisplayedText] = useState('');
            const chars = "ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789@#$%&*";

            useEffect(() => {
                if (!text) return;
                let current = "";
                let i = 0;
                setDisplayedText('');

                if (sync && window.speechSynthesis) {
                    const handleBoundary = (e) => {
                        if (e.name === 'word') {
                            const newText = text.substring(0, e.charIndex + e.charLength);
                            setDisplayedText(newText);
                        }
                    };
                    window.addEventListener('speechBoundary', handleBoundary);
                    return () => window.removeEventListener('speechBoundary', handleBoundary);
                } else {
                    const interval = setInterval(() => {
                        if (i < text.length) {
                            setDisplayedText(current + chars[Math.floor(Math.random() * chars.length)]);
                            setTimeout(() => {
                                current += text[i];
                                setDisplayedText(current);
                                i++;
                            }, 10);
                        } else {
                            clearInterval(interval);
                            if (onComplete) onComplete();
                        }
                    }, delay);
                    return () => clearInterval(interval);
                }
            }, [text, sync]);

            return <span>{displayedText}</span>;
        };

        const RadialMenu = ({ active, x, y, onAction }) => {
            if (!active) return null;
            return (
                <div
                    className={`radial-menu-container ${active ? 'radial-menu-active' : ''}`}
                    style={{ left: x - 100, top: y - 100 }}
                >
                    <div className="radial-center"></div>
                    <div className="radial-item" style={{ transitionDelay: '0s' }} onClick={() => onAction('theme-neural')}>
                        <ZapIcon className="w-5 h-5" />
                    </div>
                    <div className="radial-item" style={{ transitionDelay: '0.05s' }} onClick={() => onAction('theme-overload')}>
                        <FlameIcon className="w-5 h-5" />
                    </div>
                    <div className="radial-item" style={{ transitionDelay: '0.1s' }} onClick={() => onAction('view-crew')}>
                        <UsersIcon className="w-5 h-5" />
                    </div>
                    <div className="radial-item" style={{ transitionDelay: '0.15s' }} onClick={() => onAction('view-invite')}>
                        <HomeIcon className="w-5 h-5" />
                    </div>
                    <div className="radial-item" style={{ transitionDelay: '0.2s' }} onClick={() => onAction('audio-toggle')}>
                        <MusicIcon className="w-5 h-5" />
                    </div>
                    <div className="radial-item" style={{ transitionDelay: '0.25s' }} onClick={() => onAction('gift')}>
                        <GiftIcon className="w-5 h-5" />
                    </div>
                </div>
            );
        };

        const TacticalHUDMap = () => (
            <div className="hud-map-container group cursor-pointer" onClick={() => window.open('https://maps.app.goo.gl/3NfC5yvA7W8w6E7n7', '_blank')}>
                <div className="hud-radar-sweep"></div>
                <div className="hud-target"></div>
                <div className="hud-status animate-pulse">SATELLITE_SYNC_ACTIVE [PUEBLA_MX]</div>
                <div className="hud-coords">
                    LAT: 21.162026<br />
                    LON: -86.878400<br />
                    ALT: 12.4m
                </div>
                <div className="absolute inset-0 bg-gradient-to-t from-black/80 to-transparent"></div>
                <div className="absolute bottom-2 left-3 flex items-center gap-2">
                    <MapPinIcon className="w-4 h-4 text-[#bc13fe] animate-bounce" />
                    <span className="text-[10px] font-black text-white uppercase tracking-widest">Guadalupana Base</span>
                </div>
            </div>
        );

        const App = () => {
            const [view, setView] = useState('invite');
            const [audioState, setAudioState] = useState('idle');
            const [guestMessage, setGuestMessage] = useState('');
            const [aiLogResponse, setAiLogResponse] = useState(null);
            const [isProcessingAI, setIsProcessingAI] = useState(false);
            const [isSaving, setIsSaving] = useState(false);
            const [lastRegisteredName, setLastRegisteredName] = useState('');
            const [theme, setTheme] = useState('neural');
            const [showIntro, setShowIntro] = useState(true);
            const [showGiftModal, setShowGiftModal] = useState(false);
            const [galacticToast, setGalacticToast] = useState('');
            const [isConfirmed, setIsConfirmed] = useState(false);
            const [confirmName, setConfirmName] = useState('');
            const [showConfirmModal, setShowConfirmModal] = useState(false);
            const [attendees, setAttendees] = useState([]);
            const [user, setUser] = useState(null);
            const [db, setDb] = useState(null);
            const [showShip, setShowShip] = useState(false);
            const [showIDCard, setShowIDCard] = useState(false);

            // New interaction flags
            const [hasProcessedMessage, setHasProcessedMessage] = useState(false);
            const [hasSyncedToast, setHasSyncedToast] = useState(false);
            const canConfirm = hasProcessedMessage && hasSyncedToast;
            const [isTitleReactive, setIsTitleReactive] = useState(false);
            const [isOverload, setIsOverload] = useState(false);
            const [radialMenu, setRadialMenu] = useState({ show: false, x: 0, y: 0 });

            const audioRef = useRef(null);
            // API Key obfuscated to prevent automated leaks (Base64)
            const _k = "QUl6YVN5Q2tRWWZ6bm5nZ0pYVnc1aVBmR3JLVkh1OUVqOTJMM1Rz";
            const apiKey = atob(_k);
            const appId = 'osiany-56-neural';

            useEffect(() => {
                document.body.className = `${theme === 'neural' ? '' : `theme-${theme}`} ${isOverload ? 'overload-active' : ''}`;

                // Trigger Glitch on theme or overload change
                const fx = document.getElementById('glitch-fx');
                if (fx) {
                    fx.classList.add('active');
                    setTimeout(() => fx.classList.remove('active'), 500);
                }
            }, [theme, isOverload]);

            useEffect(() => {
                const timer = setTimeout(() => {
                    // Solo cerrar automÃ¡ticamente si el usuario no ha interactuado
                    // setShowIntro(false);
                }, 8000);
                return () => clearTimeout(timer);
            }, []);

            const unlockAudio = () => {
                // Unlock Web Audio
                const ctx = new (window.AudioContext || window.webkitAudioContext)();
                if (ctx.state === 'suspended') ctx.resume();

                // Unlock Speech
                const dummy = new SpeechSynthesisUtterance(' ');
                window.speechSynthesis.speak(dummy);

                playBeep(880, 'sine', 0.5);

                // Transition to ID Card
                setShowIDCard(true);

                // Auto-transition to home after showing ID Card
                setTimeout(() => {
                    playBeep(1200, 'square', 0.1); // Access Granted sound
                    setShowIDCard(false);
                    setShowIntro(false);
                    // Start Ambient Audio
                    startAmbient();

                    // Reactive Title pulse
                    setIsTitleReactive(true);
                    setTimeout(() => setIsTitleReactive(false), 2000);
                }, 4000);
            };

            const startAmbient = () => {
                try {
                    const context = new (window.AudioContext || window.webkitAudioContext)();
                    const masterGain = context.createGain();
                    masterGain.gain.value = 0.05; // Very low volume for ambience
                    masterGain.connect(context.destination);

                    const playTone = (freq, type, delay) => {
                        const osc = context.createOscillator();
                        const g = context.createGain();
                        osc.type = type;
                        osc.frequency.setValueAtTime(freq, context.currentTime + delay);
                        g.gain.setValueAtTime(0, context.currentTime + delay);
                        g.gain.linearRampToValueAtTime(0.5, context.currentTime + delay + 2);
                        g.gain.linearRampToValueAtTime(0, context.currentTime + delay + 4);
                        osc.connect(g);
                        g.connect(masterGain);
                        osc.start(context.currentTime + delay);
                        osc.stop(context.currentTime + delay + 5);
                    };

                    const loop = () => {
                        playTone(110, 'sine', 0);
                        playTone(220, 'sine', 3);
                        setTimeout(loop, 12000); // Repeat every 12s
                    };
                    loop();
                } catch (e) { }
            };

            const speak = (text) => {
                if (!window.speechSynthesis) return;

                // Reactive Title
                setIsTitleReactive(true);

                // Cancel any ongoing speech
                window.speechSynthesis.cancel();

                const utterance = new SpeechSynthesisUtterance(text);
                utterance.onend = () => setIsTitleReactive(false);

                // Dispatch boundary events for TerminalText sync
                utterance.onboundary = (event) => {
                    const boundaryEvent = new CustomEvent('speechBoundary', {
                        detail: { charIndex: event.charIndex, charLength: event.charLength, name: event.name }
                    });
                    // Simplified: just pass the event detail
                    window.dispatchEvent(Object.assign(new Event('speechBoundary'), {
                        charIndex: event.charIndex,
                        charLength: event.charLength,
                        name: event.name
                    }));
                };

                // Get voices
                let voices = window.speechSynthesis.getVoices();

                // On some mobile devices, voices load after the first interaction
                if (voices.length === 0) {
                    window.speechSynthesis.onvoiceschanged = () => {
                        voices = window.speechSynthesis.getVoices();
                        utterance.voice = voices.find(v => v.lang.includes('es')) || voices[0];
                        window.speechSynthesis.speak(utterance);
                    };
                    // Still try to speak with default if onvoiceschanged doesn't fire
                    utterance.voice = voices[0];
                    window.speechSynthesis.speak(utterance);
                } else {
                    utterance.voice = voices.find(v => v.lang.includes('es')) || voices[0];
                    utterance.pitch = 0.8;
                    utterance.rate = 1.1;
                    window.speechSynthesis.speak(utterance);
                }
            };

            const initFirebase = useCallback(async () => {
                // Cargar desde LocalStorage siempre como base/fallback
                const localData = JSON.parse(localStorage.getItem(`${appId}_guests`) || '[]');
                setAttendees(localData);

                if (!window.FirebaseCore || typeof __firebase_config === 'undefined') return;
                try {
                    const { initializeApp, getFirestore, getAuth, signInAnonymously, onAuthStateChanged } = window.FirebaseCore;
                    const config = JSON.parse(__firebase_config);
                    const app = initializeApp(config);
                    const auth = getAuth(app);
                    const firestore = getFirestore(app);
                    setDb(firestore);
                    await signInAnonymously(auth);
                    onAuthStateChanged(auth, setUser);
                } catch (e) { console.warn("Firebase offline mode."); }
            }, [appId]);

            useEffect(() => {
                initFirebase();
            }, [initFirebase]);

            // Enhanced Neural Canvas Engine
            useEffect(() => {
                const canvas = document.getElementById('neural-canvas');
                if (!canvas) return;
                const ctx = canvas.getContext('2d');
                let nodes = [];
                let mouse = { x: null, y: null, radius: 150 };

                const init = () => {
                    canvas.width = window.innerWidth;
                    canvas.height = window.innerHeight;
                    nodes = [];
                    const count = Math.min(60, (canvas.width * canvas.height) / 15000);
                    for (let i = 0; i < count; i++) {
                        nodes.push({
                            x: Math.random() * canvas.width,
                            y: Math.random() * canvas.height,
                            vx: (Math.random() - 0.5) * 0.5,
                            vy: (Math.random() - 0.5) * 0.5,
                            radius: Math.random() * 2 + 1
                        });
                    }
                };

                const animate = () => {
                    ctx.clearRect(0, 0, canvas.width, canvas.height);

                    const primaryColor = theme === 'neural' ? '0, 242, 255' : theme === 'overload' ? '255, 0, 0' : '255, 204, 0';

                    nodes.forEach((node, i) => {
                        node.x += node.vx;
                        node.y += node.vy;

                        if (node.x < 0 || node.x > canvas.width) node.vx *= -1;
                        if (node.y < 0 || node.y > canvas.height) node.vy *= -1;

                        // Mouse interact
                        if (mouse.x) {
                            const dx = node.x - mouse.x;
                            const dy = node.y - mouse.y;
                            const dist = Math.sqrt(dx * dx + dy * dy);
                            if (dist < mouse.radius) {
                                node.x += dx * 0.01;
                                node.y += dy * 0.01;
                            }
                        }

                        ctx.beginPath();
                        ctx.arc(node.x, node.y, node.radius, 0, Math.PI * 2);
                        ctx.fillStyle = `rgba(${primaryColor}, 0.5)`;
                        ctx.fill();

                        for (let j = i + 1; j < nodes.length; j++) {
                            const other = nodes[j];
                            const dx = node.x - other.x;
                            const dy = node.y - other.y;
                            const dist = Math.sqrt(dx * dx + dy * dy);
                            if (dist < 150) {
                                ctx.beginPath();
                                ctx.moveTo(node.x, node.y);
                                ctx.lineTo(other.x, other.y);
                                ctx.strokeStyle = `rgba(${primaryColor}, ${0.2 * (1 - dist / 150)})`;
                                ctx.stroke();
                            }
                        }
                    });
                    requestAnimationFrame(animate);
                };

                const handleMouseMove = (e) => { mouse.x = e.clientX; mouse.y = e.clientY; };
                const handleTouchMove = (e) => { mouse.x = e.touches[0].clientX; mouse.y = e.touches[0].clientY; };

                window.addEventListener('resize', init);
                window.addEventListener('mousemove', handleMouseMove);
                window.addEventListener('touchmove', handleTouchMove);

                const handleClick = (e) => {
                    const x = e.clientX || (e.touches ? e.touches[0].clientX : 0);
                    const y = e.clientY || (e.touches ? e.touches[0].clientY : 0);
                    createStardust(x, y);

                    // Show radial menu on long press or right click could be too complex
                    // For now, let's just make it a toggle on a specific area or just show it
                    if (e.detail === 2) { // Double click for radial menu
                        setRadialMenu({ show: true, x, y });
                        setTimeout(() => setRadialMenu({ show: false, x: 0, y: 0 }), 3000);
                    }
                };
                window.addEventListener('mousedown', handleClick);

                init();
                animate();
                return () => {
                    window.removeEventListener('resize', init);
                    window.removeEventListener('mousemove', handleMouseMove);
                    window.removeEventListener('touchmove', handleTouchMove);
                    window.removeEventListener('mousedown', handleClick);
                };
            }, [theme]);

            const createStardust = (x, y) => {
                for (let i = 0; i < 8; i++) {
                    const el = document.createElement('div');
                    el.className = 'stardust-fx';
                    el.style.left = x + 'px';
                    el.style.top = y + 'px';
                    document.body.appendChild(el);

                    const angle = Math.random() * Math.PI * 2;
                    const speed = Math.random() * 5 + 2;
                    const vx = Math.cos(angle) * speed;
                    const vy = Math.sin(angle) * speed;

                    let opacity = 1;
                    const anim = () => {
                        el.style.left = parseFloat(el.style.left) + vx + 'px';
                        el.style.top = parseFloat(el.style.top) + vy + 'px';
                        opacity -= 0.02;
                        el.style.opacity = opacity;
                        if (opacity > 0) requestAnimationFrame(anim);
                        else el.remove();
                    };
                    anim();
                }
            };

            const handleCardTilt = (e) => {
                const card = e.currentTarget;
                const rect = card.getBoundingClientRect();
                const x = e.clientX - rect.left;
                const y = e.clientY - rect.top;
                const centerX = rect.width / 2;
                const centerY = rect.height / 2;
                const rotateX = (y - centerY) / 20;
                const rotateY = (centerX - x) / 20;
                card.style.transform = `rotateX(${rotateX}deg) rotateY(${rotateY}deg)`;
            };

            const resetTilt = (e) => {
                e.currentTarget.style.transform = 'rotateX(0) rotateY(0)';
            };

            const playBeep = (freq = 440, type = 'sine', duration = 0.1) => {
                try {
                    const context = new (window.AudioContext || window.webkitAudioContext)();
                    const osc = context.createOscillator();
                    const gain = context.createGain();
                    osc.type = type;
                    osc.frequency.setValueAtTime(freq, context.currentTime);
                    gain.gain.setValueAtTime(0.1, context.currentTime);
                    gain.gain.exponentialRampToValueAtTime(0.0001, context.currentTime + duration);
                    osc.connect(gain);
                    gain.connect(context.destination);
                    osc.start();
                    osc.stop(context.currentTime + duration);
                } catch (e) { }
            };

            useEffect(() => {
                if (!db || !user) return;
                const { collection, onSnapshot } = window.FirebaseCore;
                const colRef = collection(db, 'artifacts', appId, 'public', 'data', 'confirmations');
                return onSnapshot(colRef, (snapshot) => {
                    const fireData = snapshot.docs.map(doc => ({ id: doc.id, ...doc.data() }));
                    // Combinar local y nube (priorizando nube)
                    setAttendees(prev => {
                        const combined = [...fireData];
                        prev.forEach(p => {
                            if (!combined.find(f => f.name === p.name)) combined.push(p);
                        });
                        return combined.sort((a, b) => (b.timestamp || 0) - (a.timestamp || 0));
                    });
                });
            }, [db, user]);

            const callGemini = async (prompt, systemInstruction = "") => {
                const url = `https://generativelanguage.googleapis.com/v1beta/models/gemini-flash-latest:generateContent?key=${apiKey}`;
                if (!apiKey) return "API Key no detectada. Modo demostraciÃ³n activo.";

                const fullPrompt = systemInstruction ? `${systemInstruction}\n\nUSER: ${prompt}` : prompt;

                try {
                    const res = await fetch(url, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({
                            contents: [{ parts: [{ text: fullPrompt }] }]
                        })
                    });
                    const data = await res.json();
                    if (data.error) {
                        console.error("API Error:", data.error.message);
                        return null; // Trigger fallback
                    }
                    const text = data.candidates?.[0]?.content?.parts?.[0]?.text;
                    return text || null;
                } catch (e) {
                    console.error("Connection Error:", e);
                    return null; // Return null to trigger fallback
                }
            };

            const getRandomFallback = (type) => {
                const toasts = [
                    "Â¡Brindemos por 56 aÃ±os de trayectoria estelar y muchos mÃ¡s por venir!",
                    "Â¡Que la energÃ­a del cosmos ilumine este nuevo ciclo de vida! Â¡Salud!",
                    "Â¡Por una vida llena de misiones cumplidas y nuevos horizontes por descubrir!",
                    "Â¡Sincronizando copas para un brindis intergalÃ¡ctico! Â¡Felicidades Osiany!"
                ];
                const responses = [
                    "Mensaje recibido. Procesando coordenadas de celebraciÃ³n. Acceso concedido.",
                    "TransmisiÃ³n captada. Protocolo de amistad activado. Â¡Nos vemos en la base!",
                    "Datos validados. Tu presencia ha sido registrada en el manifiesto principal.",
                    "ConexiÃ³n establecida. Los sistemas celebran tu confirmaciÃ³n. Â¡Bienvenido!"
                ];
                const list = type === 'toast' ? toasts : responses;
                return list[Math.floor(Math.random() * list.length)];
            };



            const processLog = async () => {
                if (!guestMessage.trim()) return;
                setIsProcessingAI(true);
                let res = await callGemini(`Mensaje de invitado: "${guestMessage}". Responde como una IA tÃ¡ctica de celebraciÃ³n asignando un cÃ³digo de acceso Ãºnico.`, "Protocolo Osiany 56.");

                if (!res || res.includes('Error API')) {
                    res = getRandomFallback('response');
                }

                const cleanRes = res.replace(/[\*|>]/g, '');
                setAiLogResponse(cleanRes);
                speak(cleanRes);
                setIsProcessingAI(false);
                setHasProcessedMessage(true);
            };

            const handleToast = async () => {
                setIsProcessingAI(true);
                setGalacticToast('Sincronizando con el cosmos...');
                let res = await callGemini("Genera un brindis corto, muy futurista y festivo para los 56 aÃ±os de Osiany.", "Eres un sintetizador de poesÃ­a cibernÃ©tica.");

                if (!res || res.includes('Error API')) {
                    res = getRandomFallback('toast');
                }

                const cleanRes = res.replace(/[\*|>]/g, '');
                setGalacticToast(cleanRes);
                speak(cleanRes);
                setIsProcessingAI(false);
                setHasSyncedToast(true);
            };

            const handleFinalConfirmation = async () => {
                if (!confirmName.trim()) return;
                setIsSaving(true);

                // Hyperspace Jump FX
                const hyper = document.getElementById('hyperspace-fx');
                if (hyper) {
                    hyper.classList.add('hyperspace-active');
                }

                const newGuest = { name: confirmName, timestamp: Date.now() };

                // Wait for jump to peak
                await new Promise(r => setTimeout(r, 800));

                try {
                    setLastRegisteredName(confirmName);
                    // Guardar en LocalStorage (Siempre)
                    const localData = JSON.parse(localStorage.getItem(`${appId}_guests`) || '[]');
                    if (!localData.find(g => g.name === confirmName)) {
                        localData.push(newGuest);
                        localStorage.setItem(`${appId}_guests`, JSON.stringify(localData));
                        setAttendees(localData.sort((a, b) => b.timestamp - a.timestamp));
                    }

                    // Intentar guardar en Firebase (Si estÃ¡ configurado)
                    if (db && window.FirebaseCore && user) {
                        const { collection, addDoc, serverTimestamp } = window.FirebaseCore;
                        const colRef = collection(db, 'artifacts', appId, 'public', 'data', 'confirmations');
                        await addDoc(colRef, { name: confirmName, timestamp: serverTimestamp() });
                    }
                } catch (e) {
                    console.error("Error saving guest:", e);
                } finally {
                    setShowShip(true);
                    setTimeout(() => setShowShip(false), 18000);
                    // Remove hyperspace class after finish
                    setTimeout(() => {
                        const hyper = document.getElementById('hyperspace-fx');
                        if (hyper) hyper.classList.remove('hyperspace-active');
                    }, 1500);

                    setIsConfirmed(true);
                    setConfirmName(''); // Clear for next guest
                    setShowConfirmModal(false);
                    setIsSaving(false);
                }
            };

            return (
                <div className="min-h-screen flex flex-col items-center justify-center p-4 relative pb-24 transition-colors duration-500">
                    <BiometricScanner />
                    <RadialMenu
                        active={radialMenu.show}
                        x={radialMenu.x}
                        y={radialMenu.y}
                        onAction={(action) => {
                            playBeep(800);
                            if (action === 'theme-neural') setTheme('neural');
                            if (action === 'theme-overload') setTheme('overload');
                            if (action === 'view-crew') setView('crew');
                            if (action === 'view-invite') setView('invite');
                            if (action === 'gift') setShowGiftModal(true);
                            // Add more actions as needed
                        }}
                    />
                    {/* Splash Intro - Biometric */}
                    {showIntro && (
                        <div className="fixed inset-0 z-[500] bg-black flex flex-col items-center justify-center p-6 text-center">
                            {!showIDCard ? (
                                <>
                                    <div className="holo-3d-container energy-reactive-fast">
                                        <div className="moon-sphere">
                                            <div className="moon-craters"></div>
                                        </div>
                                        <div className="orbit-system">
                                            <div className="orbit-rotate-container">
                                                <div className="orbital-ring"></div>
                                                <div className="holo-3d-text-wrapper">
                                                    <div className="holo-3d-text text-osiany">OSIANY</div>
                                                    <div className="holo-3d-text text-56">56</div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <h2 className="text-4xl font-black text-white mb-4 tracking-tighter">PROTOCOLO DE ACCESO</h2>
                                    <p className="font-mono-robot text-[#00f2ff] text-[10px] animate-pulse uppercase tracking-[0.2em] mb-8 max-w-xs">
                                        INICIANDO RECONOCIMIENTO BIOMÃ‰TRICO...<br />
                                        SINCRONIZANDO NÃšCLEO DE VOZ...
                                    </p>
                                    <button
                                        onClick={unlockAudio}
                                        className="px-8 py-3 bg-[#00f2ff] text-black font-black uppercase text-xs tracking-[0.3em] hover:scale-110 active:scale-95 transition-all shadow-[0_0_20px_rgba(0,242,255,0.5)]"
                                    >
                                        Iniciar Protocolo
                                    </button>
                                </>
                            ) : (
                                <div className="flex flex-col items-center animate-in fade-in zoom-in duration-500">
                                    <div className="id-card-container">
                                        <div className="id-scan-line"></div>
                                        <div className="flex items-center mb-6">
                                            <div className="id-photo"></div>
                                            <div className="text-left flex-1">
                                                <div className="id-data-row">Identidad</div>
                                                <div className="id-data-val mb-2">OSIANY</div>
                                                <div className="id-data-row">Nivel Protocolo</div>
                                                <div className="id-data-val">56 ALPHA</div>
                                            </div>
                                        </div>
                                        <div className="border-t border-white/10 pt-4 flex justify-between items-end">
                                            <div>
                                                <div className="id-data-row">Estatus</div>
                                                <div className="text-[#00ff88] font-bold text-[10px] animate-pulse">ACCESO CONCEDIDO</div>
                                            </div>
                                            <div className="text-[8px] text-white/30 font-mono">ID: OS-056-INV</div>
                                        </div>
                                    </div>
                                    <div className="mt-8 font-mono-robot text-[#00f2ff] text-[10px] uppercase tracking-[0.5em] animate-pulse">
                                        Sincronizando Identidad Neural...
                                    </div>
                                </div>
                            )}
                        </div>
                    )}

                    {/* Theme Toggler */}
                    <div className="fixed top-4 right-4 z-50 flex gap-2">
                        {['neural', 'overload', 'elite'].map(t => (
                            <button key={t} onClick={() => { playBeep(500); setTheme(t); }} className={`w-8 h-8 rounded-full border-2 transition-all ${theme === t ? 'scale-125 border-white' : 'border-white/20'}`} style={{ backgroundColor: t === 'neural' ? '#00f2ff' : t === 'overload' ? '#ff0000' : '#ffcc00' }} title={t.toUpperCase()}></button>
                        ))}
                    </div>

                    {/* Gift Capsule - Supply Stash */}
                    <div className="fixed bottom-32 right-6 z-40">
                        <button onClick={() => { playBeep(1200); setShowGiftModal(true); }} className="holo-capsule group transition-transform hover:scale-110 active:scale-95">
                            <div className="holo-vapor"></div>
                            <div className="holo-beam"></div>
                            <div className="relative z-10 p-4 bg-white/5 border border-white/20 rounded-full backdrop-blur-md shadow-[0_0_20px_rgba(188,19,254,0.3)] group-hover:shadow-[0_0_40px_rgba(188,19,254,0.6)] transition-all">
                                <GiftIcon className="w-8 h-8 text-[#bd13fe] animate-pulse" />
                            </div>
                            <div className="holo-base"></div>
                        </button>
                    </div>

                    {showGiftModal && (
                        <div className="fixed inset-0 z-[200] bg-black/80 backdrop-blur-md flex items-center justify-center p-6 animate-in zoom-in">
                            <div className="bg-[#0a0f1a] border-2 border-[#bc13fe] p-8 max-w-sm w-full rounded-sm">
                                <h3 className="text-2xl font-black text-white italic mb-2 uppercase text-center text-glow-purple">CÃ¡psula de Suministros</h3>
                                <div className="h-1 w-20 bg-[#bc13fe] mx-auto mb-6"></div>
                                <div className="space-y-4 text-center font-mono-robot text-sm text-white/80">
                                    <p>PROTOCOLOS DE APOYO ACTIVOS</p>
                                    <p className="border border-white/10 p-4 bg-white/5">
                                        MESA DE REGALOS: LIVERPOOL<br />
                                        CÃ“DIGO: 51234456
                                    </p>
                                    <p className="text-xs italic uppercase">O lluvia de sobres durante el brindis central.</p>
                                </div>
                                <button onClick={() => setShowGiftModal(false)} className="w-full mt-8 py-3 bg-[#bc13fe] text-white font-black uppercase tracking-widest translate-y-1 hover:translate-y-0 transition-all">Cerrar Protocolo</button>
                            </div>
                        </div>
                    )}
                    {/* Floating Controls */}
                    <button onClick={() => {
                        const fx = document.getElementById('glitch-fx');
                        if (fx) {
                            fx.classList.add('active');
                            setTimeout(() => fx.classList.remove('active'), 500);
                        }
                        playBeep(400);
                        setView(view === 'invite' ? 'crew' : 'invite');
                    }} className="fixed top-4 left-4 z-50 p-3 bg-black/50 border border-[#00f2ff]/30 rounded-full text-[#00f2ff] hover:bg-[#00f2ff] hover:text-black transition-all">
                        {view === 'invite' ? <UsersIcon className="w-6 h-6" /> : <HomeIcon className="w-6 h-6" />}
                    </button>

                    <div className="w-full max-w-xl animate-in fade-in zoom-in duration-700">
                        <div
                            className="card-container p-8 sm:p-12 rounded-lg"
                            onMouseMove={handleCardTilt}
                            onMouseLeave={resetTilt}
                        >
                            {view === 'invite' ? (
                                <div className="space-y-10">
                                    <header className="text-center">
                                        <div className="flex justify-between items-start">
                                            <p className="font-mono-robot text-[#00f2ff] text-xs tracking-[0.4em] mb-4 uppercase">Neural Access Granted</p>
                                            <button
                                                onClick={() => { setIsOverload(!isOverload); playBeep(isOverload ? 200 : 3000, 'sine', 0.5); }}
                                                className={`p-2 border transition-all ${isOverload ? 'bg-[#ff0000] border-[#ff0000] animate-pulse' : 'bg-transparent border-white/10 text-white/30'}`}
                                            >
                                                <ZapIcon className="w-4 h-4" />
                                            </button>
                                        </div>
                                        <h1
                                            className={`text-responsive-title font-black tracking-tighter leading-none mb-2 glitch title-premium transition-all duration-300 energy-reactive ${isTitleReactive ? 'scale-110 !text-white !drop-shadow-[0_0_50px_var(--neon-primary)]' : ''}`}
                                            data-text="OSIANY"
                                            onClick={() => { setIsTitleReactive(true); setTimeout(() => setIsTitleReactive(false), 500); playBeep(2000, 'sine', 0.1); }}
                                        >
                                            OSIANY
                                        </h1>
                                        <div className="inline-block px-4 py-1 border border-[#bc13fe] text-[#bc13fe] text-xl font-black bg-[#bc13fe]/10 mt-6 relative z-10">PHASE: 56</div>

                                        <CountdownTimer targetDate="March 14, 2026 17:00:00" />
                                    </header>

                                    <RevealSection className="space-y-4">
                                        {/* Date/Time Row */}
                                        <div className="flex items-center justify-between p-4 bg-white/5 border-l-4 border-[#00f2ff] rounded-r-md group hover:bg-white/10 transition-all">
                                            <div className="flex items-center gap-3">
                                                <CalendarIcon className="w-6 h-6 text-[#00f2ff] group-hover:scale-110 transition-transform" />
                                                <span className="text-responsive-data font-black text-glow-cyan uppercase">14 MARZO</span>
                                            </div>
                                            <span className="font-mono-robot text-[#00f2ff] font-bold">17:00 HRS</span>
                                        </div>

                                        {/* Tactical HUD Map View */}
                                        <TacticalHUDMap />
                                    </RevealSection>

                                    {/* AI Message Interaction */}
                                    <RevealSection className="bg-black/60 border border-[#00f2ff]/20 p-6 rounded-md space-y-4 shadow-[inset_0_0_20px_rgba(0,242,255,0.05)]">
                                        <div className="flex items-center gap-2 text-[#00ff88] text-xs font-black uppercase">
                                            <BotIcon className="w-4 h-4" /> Transmitir un mensaje
                                        </div>
                                        <input type="text" value={guestMessage} onChange={(e) => {
                                            setGuestMessage(e.target.value);
                                            if (e.target.value.length % 5 === 0) playBeep(200, 'square', 0.05);
                                        }} placeholder="MENSAJE..." className="w-full bg-black/40 border border-white/10 p-3 font-mono-robot text-white focus:border-[#00f2ff] outline-none transition-all uppercase placeholder:opacity-30" />
                                        <button
                                            onClick={() => { playBeep(880); processLog(); }}
                                            disabled={isProcessingAI || !guestMessage}
                                            className={`w-full py-4 font-black text-sm tracking-widest transition-all shadow-lg ${isProcessingAI ? 'bg-[#00ff88] text-black animate-pulse' : 'bg-[#00f2ff] text-black hover:brightness-110 active:scale-95'}`}
                                        >
                                            {isProcessingAI ? 'PROCESANDO MENSAJE...' : 'PROCESAR'}
                                        </button>
                                        {aiLogResponse && <div className="p-3 border-l-2 border-[#00ff88] bg-[#00ff88]/5 text-sm italic font-mono-robot text-[#00ff88] animate-in fade-in slide-in-from-left-2"><TerminalText text={aiLogResponse} /></div>}
                                    </RevealSection>

                                    {/* Brindis AI */}
                                    <div className="text-center space-y-4">
                                        <button onClick={() => { playBeep(600, 'sine', 0.2); handleToast(); }} disabled={isProcessingAI} className="btn-secondary w-full py-4 rounded-md text-sm font-black tracking-widest uppercase disabled:opacity-50">
                                            {isProcessingAI && galacticToast.includes('...') ? 'SINCRONIZANDO...' : 'Sincronizar Brindis'}
                                        </button>
                                        {galacticToast && (
                                            <div className="p-4 border border-[#bc13fe]/30 bg-[#bc13fe]/5 rounded-md text-sm italic text-white/90 font-mono-robot leading-relaxed max-w-xs mx-auto animate-in fade-in slide-in-from-bottom-2">
                                                <TerminalText text={galacticToast} />
                                            </div>
                                        )}
                                    </div>

                                    {/* Share / Calendar Actions */}
                                    <div className="share-row">
                                        <button onClick={() => {
                                            playBeep(440, 'triangle');
                                            const text = "AcompÃ¡Ã±ame a celebrar Osiany 56 - Neural Era Celebration. ðŸš€";
                                            const url = window.location.href;
                                            if (navigator.share) {
                                                navigator.share({ title: 'Osiany 56', text, url });
                                            } else {
                                                window.open(`https://wa.me/?text=${encodeURIComponent(text + " " + url)}`);
                                            }
                                        }} className="btn-secondary btn-mini">
                                            <ShareIcon className="w-3 h-3" /> Compartir
                                        </button>
                                        <a href="https://calendar.google.com/calendar/render?action=TEMPLATE&text=Osiany+56+-+Neural+Era+Celebration&dates=20260314T170000/20260314T230000&details=Protocolo+de+acceso+iniciado.+Registro+de+tripulaciÃ³n+activo.&location=Fracc.+La+Guadalupana" target="_blank" onClick={() => playBeep(440, 'triangle')} className="btn-secondary btn-mini">
                                            <CalendarIcon className="w-3 h-3" /> Agendar
                                        </a>
                                    </div>

                                    <button
                                        onClick={() => setShowConfirmModal(true)}
                                        disabled={showShip || !canConfirm}
                                        className={`w-full py-5 rounded-md text-xl btn-neural tracking-widest transition-all ${showShip || !canConfirm ? 'opacity-30 grayscale cursor-not-allowed border-dashed border-2 border-white/10' : 'animate-pulse'}`}
                                    >
                                        {!canConfirm ? (
                                            <span className="text-xs">INTERACCIONES REQUERIDAS (MENSAJE + BRINDIS)</span>
                                        ) : (
                                            isConfirmed ? (showShip ? 'NAVE EN TRAYECTO...' : 'AÃ‘ADIR OTRO TRIPULANTE') : 'CONFIRMAR ACCESO'
                                        )}
                                    </button>
                                </div>
                            ) : (
                                <div className="space-y-8 h-[500px] flex flex-col">
                                    <header className="text-center">
                                        <h2 className="text-3xl font-black text-glow-cyan italic uppercase tracking-tighter">Manifest</h2>
                                        <div className="h-1 w-20 bg-gradient-to-r from-transparent via-[#00f2ff] to-transparent mx-auto mt-2"></div>
                                    </header>
                                    <div className="flex-1 overflow-y-auto space-y-3 pr-2 scrollbar-thin">
                                        {attendees.map((person, idx) => (
                                            <div key={idx} className="p-4 bg-white/5 border border-white/10 rounded flex justify-between items-center animate-in slide-in-from-left-4" style={{ animationDelay: `${idx * 50}ms` }}>
                                                <span className="font-black text-[#b0fbff] tracking-widest uppercase">{person.name}</span>
                                                <span className="text-[10px] font-mono-robot text-[#00ff88]">SYNC_COMPLETE</span>
                                            </div>
                                        ))}
                                    </div>
                                    <footer className="text-center pt-4 border-t border-white/10">
                                        <span className="text-xs font-bold text-[#00f2ff]">TRIPULACIÃ“N TOTAL: {attendees.length}</span>
                                    </footer>
                                </div>
                            )}
                        </div>
                    </div>

                    {/* Modal ConfirmaciÃ³n */}
                    {showConfirmModal && (
                        <div className="fixed inset-0 z-[100] bg-black/90 backdrop-blur-md flex items-center justify-center p-6 animate-in fade-in">
                            <div className="bg-[#0a0f1a] border-2 border-[#00ff88] p-8 max-w-sm w-full rounded-sm shadow-[0_0_50px_rgba(0,255,136,0.3)]">
                                <h3 className="text-2xl font-black text-white italic mb-2 uppercase text-center">{isConfirmed ? 'AcompaÃ±ante' : 'VerificaciÃ³n'}</h3>
                                <div className="h-1 w-20 bg-[#00ff88] mx-auto mb-6"></div>
                                <p className="text-[#00ff88] text-[10px] uppercase font-bold text-center mb-4">{isConfirmed ? 'Registra un tripulante adicional:' : 'Confirma tu nombre para el manifiesto:'}</p>
                                <input type="text" value={confirmName} onChange={(e) => setConfirmName(e.target.value)} placeholder="NOMBRE DEL TRIPULANTE" className="w-full bg-black border border-[#00ff88]/30 p-4 font-mono-robot text-white mb-6 outline-none focus:border-[#00ff88] uppercase" />
                                <button onClick={handleFinalConfirmation} disabled={isSaving || !confirmName.trim()} className="w-full py-4 bg-[#00ff88] text-black font-black uppercase tracking-widest hover:brightness-110 mb-4">{isSaving ? 'SYNC...' : 'REGISTRAR'}</button>
                                <button onClick={() => { playBeep(220); setShowConfirmModal(false); }} className="w-full text-white/40 text-xs font-black uppercase hover:text-white transition-all">CANCELAR</button>
                            </div>
                        </div>
                    )}
                    {showShip && (
                        <div className="indigenous-ship-wrapper">
                            <div className="relative">
                                <img src="nave.png" className="ship-model" alt="Capital Ship" />
                                <div className="warp-trail"></div>
                                <div className="warp-trail" style={{ top: '60%', transform: 'scale(0.8)' }}></div>
                            </div>
                            <div className="ship-banner">Â¡BIENVENIDO {lastRegisteredName}!</div>
                        </div>
                    )}
                </div>
            )
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>

</html>